{"version":3,"file":"8.B37OCV3B.js","sources":["../../../../../../src/routes/login/+page.ts","../../../../../../src/routes/login/+page.svelte"],"sourcesContent":["import { restoreRouteFromUrlParam } from '$lib'\n\nexport type Data = {\n    route: {\n        href: string | null,\n        sanitized: string | null\n    }\n}\n\nexport async function load(data): Promise<Data> {\n    const route = data.url.searchParams.get(\"route\")\n    return {\n        route: {\n            sanitized: route,\n            href: route ? restoreRouteFromUrlParam(route) : null\n        }\n    }\n}","<script lang=\"ts\">\n    import { goto } from \"$app/navigation\";\n    import { request } from \"$lib/api\";\n    import type { Data } from \"./+page\";\n\n    export let data: Data;\n\n    const {\n        route: { href, sanitized },\n    } = data;\n\n    let email: string;\n    let password: string;\n    let dev: boolean;\n\n    const login = {\n        test: async () => {\n            const response = await request(\"devAuth\", \"query\", {\n                email,\n            });\n\n            document.cookie = `refresh_token=${response.refresh_token}; path=/`;\n            goto(href ?? \"/\");\n        },\n    };\n</script>\n\n<div class=\"bg-gray-100 h-screen flex items-center justify-center\">\n    <div class=\"w-full max-w-md p-6 bg-white rounded-lg shadow-md\">\n        <div class=\"flex flex-col space-y-4\">\n            <!-- MIT Touchstone Login -->\n            <a\n                class=\"btn btn-outline btn-lg w-full text-xl font-semibold\"\n                href=\"{API_BASE}/login/mit?route={sanitized}\"\n                rel=\"external\"\n            >\n                Sign in with MIT Touchstone\n            </a>\n            <a\n                class=\"btn btn-outline btn-lg w-full text-xl font-semibold\"\n                href=\"{API_BASE}/login/github?route={sanitized}\"\n                rel=\"external\"\n            >\n                Sign in with Github\n            </a>\n\n            <!-- Divider -->\n            <div class=\"divider\">OR</div>\n\n            <!-- Admin Login Form -->\n            <div class=\"bg-gray-50 p-4 rounded-lg shadow-sm opacity-75\">\n                <div class=\"text-center text-sm text-gray-600 mb-4\">\n                    Admin access only\n                </div>\n\n                <!-- Admin Login Form -->\n                <form>\n                    <div class=\"form-control mb-3\">\n                        <label class=\"label\">\n                            <span class=\"label-text text-xs\">Email</span>\n                        </label>\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter username\"\n                            class=\"input input-sm input-bordered w-full\"\n                            required\n                            bind:value={email}\n                        />\n                    </div>\n                    <div class=\"form-control mb-3\">\n                        <label class=\"label\">\n                            <span class=\"label-text text-xs\">Password</span>\n                        </label>\n                        <input\n                            type=\"password\"\n                            placeholder=\"Enter password\"\n                            class=\"input input-sm input-bordered w-full\"\n                            bind:value={password}\n                        />\n                    </div>\n                    <div class=\"flex flex-row items-center justify-center mb-3\">\n                        <label class=\"cursor-pointer label\">\n                            <input\n                                type=\"checkbox\"\n                                class=\"checkbox checkbox-sm mr-2\"\n                                bind:checked={dev}\n                            />\n                            <span class=\"label-text text-xs\">Dev Mode</span>\n                        </label>\n                    </div>\n                    <button\n                        type=\"submit\"\n                        class=\"btn btn-outline btn-sm w-full\"\n                        on:click={() => {\n                            dev ? login.test() : void 0;\n                        }}\n                    >\n                        Sign in as Admin\n                    </button>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>\n"],"names":["load","data","route","restoreRouteFromUrlParam","attr","a0","ctx","a1","insert_hydration","target","div8","anchor","append_hydration","div7","div6","div0","div5","div1","form","div2","label0","input0","div3","label1","input1","div4","label2","input2","span2","button","$$props","href","sanitized","email","password","dev","login","response","request","goto"],"mappings":"6UASA,eAAsBA,GAAKC,EAAqB,CAC5C,MAAMC,EAAQD,EAAK,IAAI,aAAa,IAAI,OAAO,EACxC,MAAA,CACH,MAAO,CACH,UAAWC,EACX,KAAMA,EAAQC,GAAyBD,CAAK,EAAI,IACpD,CAAA,CAER,0aCkBY,6BAEA,sBAKA,qBAEA,kgBATA,6BAEA,gFAKA,qBAEA,2nCAXWE,EAAAC,EAAA,OAAA,oBAA2BC,EAAS,CAAA,CAAA,2FAOpCF,EAAAG,EAAA,OAAA,uBAA8BD,EAAS,CAAA,CAAA,k7BA+DzDE,GAAAC,EAAAC,EAAAC,CAAA,EA3EDC,EA0EKF,EAAAG,CAAA,EAzEDD,EAwEKC,EAAAC,CAAA,EAtEDF,EAMGE,EAAAT,CAAA,gBACHO,EAMGE,EAAAP,CAAA,gBAGHK,EAA4BE,EAAAC,CAAA,SAG5BH,EAkDKE,EAAAE,CAAA,EAjDDJ,EAEKI,EAAAC,CAAA,SAGLL,EA2CMI,EAAAE,CAAA,EA1CFN,EAWKM,EAAAC,CAAA,EAVDP,EAEOO,EAAAC,CAAA,SACPR,EAMCO,EAAAE,CAAA,MADef,EAAK,CAAA,CAAA,SAGzBM,EAUKM,EAAAI,CAAA,EATDV,EAEOU,EAAAC,CAAA,SACPX,EAKCU,EAAAE,CAAA,MADelB,EAAQ,CAAA,CAAA,SAG5BM,EASKM,EAAAO,CAAA,EARDb,EAOOa,EAAAC,CAAA,EANHd,EAICc,EAAAC,CAAA,YADiBrB,EAAG,CAAA,SAErBM,EAA+Cc,EAAAE,CAAA,SAGvDhB,EAQQM,EAAAW,CAAA,mHAhCYvB,EAAK,CAAA,OAALA,EAAK,CAAA,CAAA,iBAWLA,EAAQ,CAAA,OAARA,EAAQ,CAAA,CAAA,kBAQFA,EAAG,CAAA,4DAhFlC,GAAA,CAAA,KAAAL,CAAA,EAAA6B,EAGP,KAAA,CAAA,MAAA,CAAS,KAAAC,EAAM,UAAAC,IACf/B,EAEA,IAAAgC,EACAC,EACAC,EAEE,MAAAC,EAAA,CACF,KAAA,SAAA,OACUC,EAAiB,MAAAC,GAAQ,UAAW,QACtC,CAAA,MAAAL,EAAA,EAGK,SAAA,OAAA,iBAA0BI,EAAS,aAAa,WACzDE,GAAKR,GAAQ,GAAG,iBA4CYE,EAAK,KAAA,0BAWLC,EAAQ,KAAA,0BAQFC,EAAG,KAAA,4BASfA,GAAAC,EAAM"}
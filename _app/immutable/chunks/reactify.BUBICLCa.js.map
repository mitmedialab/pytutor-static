{"version":3,"file":"reactify.BUBICLCa.js","sources":["../../../../../../node_modules/svelte-preprocess-react/dist/internal/SvelteWrapper.svelte","../../../../../../node_modules/svelte-preprocess-react/dist/reactify.js"],"sourcesContent":["<script>import { createEventDispatcher, onMount, tick } from \"svelte\";\nconst dispatch = createEventDispatcher();\nexport let SvelteComponent;\nexport let props;\nexport let children;\nexport let events;\nlet slot = void 0;\nlet instance;\n$:\n  if (instance) {\n    syncEvents(events);\n  }\nlet offs = [];\nfunction syncEvents(listeners) {\n  offs.forEach((off) => off());\n  offs = [];\n  if (listeners) {\n    Object.entries(listeners).forEach(([event, listener]) => {\n      offs.push(instance.$on(event, listener));\n    });\n  }\n}\n$:\n  dispatch(\"svelte-slot\", slot);\nonMount(() => {\n  tick().then(() => {\n    dispatch(\"svelte-slot\", slot);\n  });\n});\n</script>\n\n{#if children}\n  <svelte:component this={SvelteComponent} bind:this={instance} {...props}\n    ><svelte-slot bind:this={slot} /></svelte:component\n  >\n{:else}\n  <svelte:component this={SvelteComponent} bind:this={instance} {...props} />\n{/if}\n\n<style>\n  svelte-slot {\n    display: contents;\n  }\n</style>\n","import * as React from \"react\";\nimport SvelteWrapper from \"./internal/SvelteWrapper.svelte\";\nimport SvelteToReactContext from \"./internal/SvelteToReactContext.js\";\n/**\n * Convert a Svelte component into a React component.\n */\nexport default function reactify(SvelteComponent) {\n    const { name } = SvelteComponent;\n    const named = {\n        [name](options) {\n            const { children } = options;\n            const props = extractProps(options);\n            const events = extractListeners(options);\n            const wrapperRef = React.useRef();\n            const svelteRef = React.useRef();\n            const slotRef = React.useRef();\n            const childrenRef = React.useRef();\n            const context = React.useContext(SvelteToReactContext);\n            // Mount Svelte component\n            React.useEffect(() => {\n                const target = wrapperRef.current;\n                if (!target) {\n                    return undefined;\n                }\n                const component = new SvelteWrapper({\n                    target,\n                    props: {\n                        SvelteComponent: SvelteComponent,\n                        children: detectChildren(children),\n                        props,\n                        events,\n                    },\n                    context,\n                });\n                component.$on(\"svelte-slot\", ({ detail: el }) => {\n                    if (el && childrenRef.current) {\n                        el.appendChild(childrenRef.current);\n                    }\n                    slotRef.current = el;\n                });\n                svelteRef.current = component;\n                return () => {\n                    component.$destroy();\n                };\n            }, [wrapperRef]);\n            // Sync props & events\n            React.useEffect(() => {\n                if (svelteRef.current) {\n                    svelteRef.current.$set({ props, events });\n                }\n            }, [props, svelteRef]);\n            // Sync children/slot\n            React.useEffect(() => {\n                if (childrenRef.current) {\n                    if (slotRef.current &&\n                        childrenRef.current.parentElement !== slotRef.current) {\n                        slotRef.current.appendChild(childrenRef.current);\n                    }\n                }\n                else if (slotRef.current) {\n                    slotRef.current.innerHTML = \"\";\n                }\n            }, [childrenRef]);\n            const ssr = SvelteComponent;\n            if (ssr.render) {\n                const $$slots = {};\n                if (typeof children === \"string\") {\n                    $$slots.default = () => children;\n                }\n                const result = ssr.render(props, {\n                    context,\n                    $$slots,\n                });\n                return React.createElement(\"svelte-wrapper\", {\n                    style: {\n                        display: \"contents\",\n                    },\n                    dangerouslySetInnerHTML: { __html: result.html },\n                });\n            }\n            return React.createElement(\"svelte-wrapper\", {\n                ref: wrapperRef,\n                style: { display: \"contents\" },\n            }, children\n                ? React.createElement(\"react-children\", {\n                    ref: childrenRef,\n                    style: { display: \"contents\" },\n                }, children)\n                : undefined);\n        },\n    };\n    return named[name];\n}\nfunction extractProps(options) {\n    const props = {};\n    Object.entries(options).forEach(([prop, value]) => {\n        if (prop !== \"children\" && isEventProp(prop) === false) {\n            props[prop] = value;\n        }\n    });\n    return props;\n}\nfunction extractListeners(options) {\n    const listeners = {};\n    Object.entries(options).forEach(([prop, value]) => {\n        if (isEventProp(prop)) {\n            listeners[prop[2].toLowerCase() + prop.slice(3)] = value;\n        }\n    });\n    return listeners;\n}\nfunction isEventProp(prop) {\n    return /^on[A-Z]/.test(prop);\n}\nfunction detectChildren(children) {\n    if (children === undefined) {\n        return false;\n    }\n    if (Array.isArray(children) && children.length === 0) {\n        return false;\n    }\n    return true;\n}\n"],"names":["ctx","insert_hydration","target","svelte_slot","anchor","dispatch","createEventDispatcher","SvelteComponent","$$props","props","children","events","slot","instance","offs","syncEvents","listeners","off","event","listener","onMount","tick","$$value","reactify","name","options","extractProps","extractListeners","wrapperRef","React.useRef","svelteRef","slotRef","childrenRef","context","React.useContext","SvelteToReactContext","React.useEffect","component","SvelteWrapper","detectChildren","el","ssr","$$slots","result","React.createElement","prop","value","isEventProp"],"mappings":"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","x_google_ignoreList":[0,1]}